From a1d0d56cfa7629a2e0aff0a1743ee7d1654a601f Mon Sep 17 00:00:00 2001
From: ZezhongWang <904192625@qq.com>
Date: Thu, 19 Jan 2023 11:28:43 +0200
Subject: [PATCH 2/2] add missing endif

---
 src/core/lib/iomgr/tcp_server_utils_posix_common.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/core/lib/iomgr/tcp_server_utils_posix_common.cc b/src/core/lib/iomgr/tcp_server_utils_posix_common.cc
index d7f01c1e71..52b8925485 100644
--- a/src/core/lib/iomgr/tcp_server_utils_posix_common.cc
+++ b/src/core/lib/iomgr/tcp_server_utils_posix_common.cc
@@ -76,6 +76,7 @@ static void init_max_accept_queue_size(void) {
             "connection drops",
             s_max_accept_queue_size);
   }
+#endif
 }
 
 static int get_max_accept_queue_size(void) {
@@ -174,7 +175,7 @@ grpc_error_handle grpc_tcp_server_prepare_socket(
 #endif
   err = grpc_set_socket_nonblocking(fd, 1);
   if (!GRPC_ERROR_IS_NONE(err)) goto error;
-#if !defined(GPR_PLAYSTATION)
+#ifndef GPR_PLAYSTATION
   err = grpc_set_socket_cloexec(fd, 1);
   if (!GRPC_ERROR_IS_NONE(err)) goto error;
 #endif
-- 
2.39.0.windows.1

